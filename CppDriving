#include <iostream>
using namespace std;

class Player
{
public:
	int posx;
	int posy;
	int player_repr;

	Player(int x, int y, int repr)
	{
		posx = x;
		posy = y;
		player_repr = repr;
	}
};

class Entity
{
public:
	int posx;
	int posy;
	int map_repr;

	Entity(int x, int y, int repr)
	{
		posx = x;
		posy = y;
		map_repr = repr;
	}
	
	void move_self_x()
	{
	    posx += 1;
	}
};

class FieldDisplay
{
public:
	int sizex;
	int sizey;
	int** field_arr;
	string field_repr;
	// List of translations for display. E.g. if map representation of an Entity
	// is 2, display " O ". This is to avoid converting ints and strings.
	string codex[3] = {" ", " P ", " O "};

	FieldDisplay(int x, int y)
	{
		sizex = x;
		sizey = y;
		field_repr = "";
	}

	int** CreateField()
	{
		field_arr = (int**)malloc(sizex * sizeof(int*));
		for (int x = 0; x < sizex; x++)
		{
			field_arr[x] = (int*)malloc(sizey * sizeof(int));
			for (int i = 0; i < sizey; i++)
			{
				field_arr[x][i] = 0;

			}
		}
		return field_arr;
	}

	string FieldRepr()
	{
		field_repr += "\n";
		for (int x = 0; x < sizex; x++)
		{
			for (int y = 0; y < sizey; y++)
			{
			    switch(field_arr[x][y])
			    {
			        case 0:
				        field_repr += codex[0];
				        break;
				    case 1:
				        field_repr += codex[1];
				        break;
				    case 2:
				        field_repr += codex[2];
				        break;
			    }
			}
			field_repr += "\n";
		}
		return field_repr;
	}

	void placeEntity(int posx, int posy, int map_repr)
	{
		field_arr[posx][posy] = map_repr;
	}
	
};

// Temporarily here. This will be moved.
Entity* entities[30];

int main()
{
	FieldDisplay fd(9, 9);
	Player pc(8, 4, 1);
	Entity obstacle(0, 5, 2);
	entities[0] = &obstacle;
	fd.CreateField();
	fd.placeEntity(pc.posx, pc.posy, pc.player_repr);
	fd.placeEntity(obstacle.posx, obstacle.posy, obstacle.map_repr);
	cout << fd.FieldRepr();
	entities[0]->move_self_x();
	entities[0]->move_self_x();
	entities[0]->move_self_x();

	fd.placeEntity(obstacle.posx, obstacle.posy, obstacle.map_repr);
	cout << fd.FieldRepr();

	return 0;
}
